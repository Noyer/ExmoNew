{% extends "exmo2010/base_site.html" %}
{% comment %}
# This file is part of EXMO2010 software.
# Copyright 2010, 2011 Al Nikolov
# Copyright 2010, 2011, 2012 Institute for Information Freedom Development
#
#    This program is free software: you can redistribute it and/or modify
#    it under the terms of the GNU Affero General Public License as
#    published by the Free Software Foundation, either version 3 of the
#    License, or (at your option) any later version.
#
#    This program is distributed in the hope that it will be useful,
#    but WITHOUT ANY WARRANTY; without even the implied warranty of
#    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
#    GNU Affero General Public License for more details.
#
#    You should have received a copy of the GNU Affero General Public License
#    along with this program.  If not, see <http://www.gnu.org/licenses/>.
#
{% endcomment %}
{% load i18n adminmedia check_object_permission %}
{% block extrastyle %}{{ block.super }}<link rel="stylesheet" type="text/css" href="{% admin_media_prefix %}css/forms.css" />{% endblock %}
{% block breadcrumbs %}
<div class="breadcrumbs"><a href="{% url exmo.exmo2010.view.monitoring.monitoring_list %}">{% trans 'Home' %}</a>&rsaquo;
<a href="{% url exmo.exmo2010.view.monitoring.monitoring_list %}">{% trans 'Monitoring' %}</a>&rsaquo;
<a href="{% url exmo.exmo2010.view.organization.organization_list task.organization.monitoring.pk %}">{% trans 'Organizations for monitoring ' %}{{task.organization.monitoring}}</a>&rsaquo;
<a href="{% url exmo.exmo2010.view.task.tasks_by_monitoring_and_organization task.organization.monitoring.pk, task.organization.pk %}">{{ task.organization.name }}</a>&rsaquo;
<a href="{% url exmo.exmo2010.view.score.score_list_by_task task.pk %}">{% trans 'Score list for' %}&nbsp;{{ task.organization.name }}</a>&rsaquo;
{{title}}
</div>
{% endblock %}
{% block content %}
<h2><a href={{task.organization.url }}>{{task.organization.name}}</a></h2>
<div id=parameter_desc>
<table id=parameter_desc_table>
<th>{% trans 'Parameter description' %}</th>
<tr><td>
{% trans 'Name' %}: {{ parameter }}<br>
{% trans 'Description' %}: {{ parameter.description }}
</td></tr>
</table>
</div>

<p>{{ form.non_field_errors }}</p>

<div id=score_form>
<form method="post" action="">{% csrf_token %}
  <div id=score_form_body>
    <div id=score_form_found>{{ form.found.label_tag }}</dt><dd>{{ form.found }} {{ form.found.errors }}</div>
{% if parameter.complete %}
    <div id=score_form_complete>
    <dt>{{ form.complete.label_tag }}</dt><dd>{{ form.complete }} {{ form.complete.errors }}</dd>
      <div id=score_form_completeComment>
	<dt>{{ form.completeComment.label_tag }}</dt><dd>{{ form.completeComment }} {{ form.completeComment.errors }}</dd>
      </div>
    </div>
{% endif %}
{% if parameter.topical %}
    <div id=score_form_topical>
    <dt>{{ form.topical.label_tag }}</dt><dd>{{ form.topical }} {{ form.topical.errors }}</dd>
      <div id=score_form_topicalComment>
	<dt>{{ form.topicalComment.label_tag }}</dt><dd>{{ form.topicalComment }} {{ form.topicalComment.errors }}</dd>
      </div>
    </div>
{% endif %}
{% if parameter.accessible %}
    <div id=score_form_accessible>
    <dt>{{ form.accessible.label_tag }}</dt><dd>{{ form.accessible }} {{ form.accessible.errors }}</dd>
      <div id=score_form_accessibleComment>
	<dt>{{ form.accessibleComment.label_tag }}</dt><dd>{{ form.accessibleComment }} {{ form.accessibleComment.errors }}</dd>
      </div>
{% endif %}
{% if parameter.hypertext %}
    <dt>{{ form.hypertext.label_tag }}</dt><dd>{{ form.hypertext }} {{ form.hypertext.errors }}</dd>
      <div id=score_form_hypertextComment>
	<dt>{{ form.hypertextComment.label_tag }}</dt><dd>{{ form.hypertextComment }} {{ form.hypertextComment.errors }}</dd>
      </div>
{% endif %}
{% if parameter.document %}
    <dt>{{ form.document.label_tag }}</dt><dd>{{ form.document }} {{ form.document.errors }}</dd>
      <div id=score_form_documentComment>
	<dt>{{ form.documentComment.label_tag }}</dt><dd>{{ form.documentComment }} {{ form.documentComment.errors }}</dd>
      </div>
{% endif %}
{% if parameter.image %}
    <dt>{{ form.image.label_tag }}</dt><dd>{{ form.image }} {{ form.image.errors }}</dd>
      <div id=score_form_imageComment>
	<dt>{{ form.imageComment.label_tag }}</dt><dd>{{ form.imageComment }} {{ form.imageComment.errors }}</dd>
      </div>
    </div>
{% endif %}
    <div id=score_form_comment>
    <dt>{{ form.comment.label_tag }}</dt><dd>{{ form.comment }} {{ form.comment.errors }}</dd>
    </div>
    <input type="hidden" name="task" id="id_task" value="{{task.pk}}" />
    <input type="hidden" name="parameter" id="id_parameter" value="{{parameter.pk}}" />
    <div id=score_form_claim>
    {% if object and user.is_superuser %}
        <dt>{{ form.claim.label_tag }}</dt><dd>{{ form.claim }} {{ form.claim.errors }}</dd>
    {% else %}
        {{ form.claim.as_hidden }}
    {% endif %}
    </div>
  </div>
  <p>
    <input type="submit" value={% trans 'Save' %} /><input type="reset" class=button />
    {% if object %}
    {% check_object_permission exmo2010.delete_score object as can_delete %}
    {% if can_delete %}
    &nbsp;<INPUT TYPE="BUTTON" STYLE='background: red' VALUE="{% trans 'Delete' %}" ONCLICK="window.location.href='{% url exmo.exmo2010.view.score.score_manager object.pk,'delete' %}?{{request.GET.urlencode}}'" />
    {% endif %}
    {% endif %}
    {% check_object_permission exmo2010.exclude_perameter parameter as perm %}
    {% if perm %}
        &nbsp;<INPUT TYPE="BUTTON" STYLE='background: #CC3333' VALUE="{% trans 'Set non-relevant' %}" ONCLICK="window.location.href='{% url exmo.exmo2010.view.parameter.parameter_manager task.pk,parameter.pk,'exclude' %}?{{request.GET.urlencode}}'" />
    {% endif %}
  </p>
</form>
</div>
{% if object %}
{% include "exmo2010/score_claim.html" %}
{% include "exmo2010/score_comment.html" %}
{% endif %}
{% endblock %}
