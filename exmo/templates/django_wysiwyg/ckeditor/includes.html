{% comment %}
# This file is part of EXMO2010 software.
# Copyright 2010, 2011 Al Nikolov
# Copyright 2010, 2011 non-profit partnership Institute of Information Freedom Development
# Copyright 2012, 2013 Foundation "Institute for Information Freedom Development"
#
#    This program is free software: you can redistribute it and/or modify
#    it under the terms of the GNU Affero General Public License as
#    published by the Free Software Foundation, either version 3 of the
#    License, or (at your option) any later version.
#
#    This program is distributed in the hope that it will be useful,
#    but WITHOUT ANY WARRANTY; without even the implied warranty of
#    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
#    GNU Affero General Public License for more details.
#
#    You should have received a copy of the GNU Affero General Public License
#    along with this program.  If not, see <http://www.gnu.org/licenses/>.
#
{% endcomment %}

{% comment %}
    CKEditor requires you to have the resources referenced below installed under your STATIC_URL/ckeditor.
    You can download them from ckeditor.com, or include django-ckeditor in your project.
{% endcomment %}
{% load wysiwyg %}
<script type="text/javascript" src="{% wysiwyg_static_url "ckeditor" "ckeditor/ckeditor/" DJANGO_WYSIWYG_MEDIA_URL %}ckeditor.js"></script>
<script type="text/javascript">
    // allow custom settings per editor ID
    var django_wysiwyg_editor_configs = {
        'id_comment': {
            'toolbar': [
                [
                    'Bold', 'Italic', 'Underline',
                    '-', 'Blockquote',
                    '-', 'BulletedList', 'NumberedList',
                    '-', 'Link', 'Unlink'
                ]
            ],
            'toolbarCanCollapse': false,
            'resize_enabled': false,
            'removePlugins' : 'elementspath',
            'contentsCss': [
                '/static/admin/css/base.css',
                '/static/exmo2010/patch.css'
            ],
            'bodyClass': 'ck-contents'
        },

        'id_claim-comment': {
            'toolbar': [
                [
                    'Bold', 'Italic', 'Underline',
                    '-', 'Blockquote',
                    '-', 'BulletedList', 'NumberedList',
                    '-', 'Link', 'Unlink'
                ]
            ],
            'toolbarCanCollapse': false,
            'resize_enabled': false,
            'removePlugins' : 'elementspath',
            'contentsCss': [
                '/static/admin/css/base.css',
                '/static/exmo2010/patch.css'
            ],
            'bodyClass': 'ck-contents'
        },

        'id_clarification-comment': {
            'toolbar': [
                [
                    'Bold', 'Italic', 'Underline',
                    '-', 'Blockquote',
                    '-', 'BulletedList', 'NumberedList',
                    '-', 'Link', 'Unlink'
                ]
            ],
            'toolbarCanCollapse': false,
            'resize_enabled': false,
            'removePlugins' : 'elementspath',
            'contentsCss': [
                '/static/admin/css/base.css',
                '/static/exmo2010/patch.css'
            ],
            'bodyClass': 'ck-contents'
        }
    };

    {% block django_wysiwyg_editor_config %}
        var django_wysiwyg_editor_config = null;
    {% endblock %}

    var django_wysiwyg =
    {
        editors: {},

        enable: function django_wysiwyg_enable(editor_name, field_id, config)
        {
            if( !config ) {
                config = django_wysiwyg_editor_configs[field_id] || django_wysiwyg_editor_config;
            }

            if( !this.editors[editor_name] ) {
                this.editors[editor_name] = CKEDITOR.replace(field_id, config);
            }
        },

        disable: function django_wysiwyg_disable(editor_name)
        {
            var editor = this.editors[editor_name];
            if( editor ) {
                editor.destroy(true);
                this.editors[editor_name] = null;
            }
        },

        is_loaded: function django_wysiwyg_is_loaded()
        {
            return window.CKEDITOR != null;
        }
    }
</script>
